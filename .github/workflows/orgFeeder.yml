name: orgFeeder
run-name: ${{github.actor}} is running Github Actions...
on: [pull_request, push]

jobs:
  run-jest:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Git secrets
      - run: git secrets --scan -r HEAD

      - name: Set up environment variables
        env:
          SECRET_JWT: ${{secrets.SECRET_JWT}}
          EMAIL: ${{secrets.EMAIL}}
          PASSWORD: ${{secrets.PASSWORD}}
          MONGO_URI: ${{secrets.MONGO_URI}}
          MONGO_TEST_URI: ${{secrets.MONGO_TEST_URI}}

      - uses: actions/setup-node@v3
      - run: npm install
      - run: echo ${{env.MONGO_TEST_URI}}
      - run: npm test
